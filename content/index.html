<!DOCTYPE html>
<html>
    <head>
        <title>Dumb page from dumb server</title>
    </head>
    <body>
        <h1>Dumb header from dumb page</h1>
        <p>Dumb content</p>
        <h2> How to replicate this web page </h2>
        <li> copy C code below into a file named <code>main.c</code> </li>
        <li> copy HTML code below into a file named <code>index.html</code> </li>
        <li> compile the C code with the command:
            <code>gcc main.c -o dumb_server</code>
        </li>
        <li> run the server:
            <code>./dumb_server</code>
        </li>
        <li> open the server on your browser:
            <code>http://localhost:2728</code>
        </li>

        <h2> TODO </h2>
        <li> Refactor ugly C code (replace bad libc string functions) </li>
        <li> Sanitize user input </li>
        <li> Serve over HTTPS </li>
        <li> Add instructions for replication </li>
        <div>
            <img width=200 src="c-logo.png" alt="C programming language logo">
        </div>

        <h2> Server source code </h2>
        <pre><code id="ccode"></code></pre>

        <h2> HTML source code </h2>
        <pre><code id="htmlcode"></code></pre>

        <script>
            document.addEventListener("DOMContentLoaded", function() {
                function setUpCanvas() {
                    canvas0 = document.getElementById("ccode");
                    fetch("main.c")
                    .then((res) => res.text())
                    .then((text) => {
                        canvas0.textContent = text
                    })
                    .catch((e) => console.error(e));

                    canvas = document.getElementById("htmlcode");
                    fetch("index.html")
                    .then((res) => res.text())
                    .then((text) => {
                    canvas.textContent = text
                    })
                    .catch((e) => console.error(e));
                }
                setUpCanvas();
                window.addEventListener('resize', setUpCanvas, false);
            }, false);
        </script>
    </body>
</html>
